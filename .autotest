# vim: filetype=ruby :

Autotest.add_hook(:initialize) do |autotest|
  autotest.clear_mappings

  # lib -> test
  autotest.add_mapping %r{^lib/.*?(\w+).rb$} do |path, match|
    autotest.files_matching %r{^test/#{match[1]}_test.rb$}
  end

  # test
  autotest.add_mapping %r{^test/.*_test.rb$} do |path, match|
    path
  end

  # test_helper -> test
  autotest.add_mapping %r{^test/test_helper.rb$} do |path, match|
    autotest.files_matching %r{^test/.*_test.rb$}
  end
end
